(function(){var h,b,e,d,g,a,c={}.hasOwnProperty,f=function(l,j){for(var i in j){if(c.call(j,i)){l[i]=j[i]}}function k(){this.constructor=l}k.prototype=j.prototype;l.prototype=new k();l.__super__=j.prototype;return l};a=(function(){function i(j,k){if(j==null){j=0}if(k==null){k=0}this.set(j,k)}i.prototype.set=function(j,k){if(j==null){j=0}if(k==null){k=0}this.x=j;this.y=k;return this};i.prototype.add=function(j){this.x+=j.x;this.y+=j.y;return this};i.prototype.sub=function(j){this.x-=j.x;this.y-=j.y;return this};i.prototype.scale=function(j){this.x*=j;this.y*=j;return this};i.prototype.div=function(j){this.x/=j;this.y/=j;return this};i.prototype.product=function(j){return this.x*j.x+this.y*j.y};i.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};i.prototype.resize=function(j){if(this.length()){this.scale(j/this.length())}return this};i.prototype.normalize=function(){return this.resize(1)};i.prototype.angle=function(){return(180*Math.atan2(this.y,this.x))/Math.PI};i.prototype.rotate=function(m){var k,l,j,n;k=(m*Math.PI)/180;l=this.length();j=this.x;n=this.y;this.x=Math.sin(k)*n+Math.cos(k)*j;this.y=Math.cos(k)*n-Math.sin(k)*j;return this.resize(l)};i.prototype.clone=function(){return new i(this.x,this.y)};i.prototype.reverse=function(){this.x*=-1;this.y*=-1;return this};i.prototype.max=function(j){if(this.length()<=j){return this}return this.resize(j)};i.prototype.min=function(j){if(this.length()>=j){return this}return this.resize(j)};i.prototype.isZero=function(){return this.x===0&&this.y===0};return i})();Array.prototype._index=function(i){var j;if(i<0){j=this.length;return j+i}return i};Array.prototype.at=function(i){return this[this._index(i)]};Array.prototype.map=function(i){var k,j;return([].splice.apply(this,[0,this.length-0].concat(j=(function(){var n,m,l;l=[];for(n=0,m=this.length;n<m;n++){k=this[n];l.push(i(k))}return l}).call(this))),j)};Array.prototype.clone=function(){return this.dup()};Array.prototype.dup=function(){return this.slice(0,this.length)};Array.prototype.each=function(j){var i,l,k;for(i=l=0,k=this.length;0<=k?l<k:l>k;i=0<=k?++l:--l){j(this[i],i)}return this};Array.prototype.deleteAt=function(i){i=this._index(i);if(i>=this.length){return void 0}return this.splice(i,1)};Array.prototype.deleteIf=function(k){var j;return this.replace((function(){var m,l,i;i=[];for(j=m=0,l=this.length;0<=l?m<l:m>l;j=0<=l?++m:--m){if(!k(this[j],j)){i.push(this[j])}}return i}).call(this))};Array.prototype.reject=function(i){var j;j=this.length;this.deleteIf(i);if(j===this.length){return void 0}return this};Array.prototype.isEmpty=function(){return this.length===0};Array.prototype.isEql=function(i,m){var j,l,k;if(m==null){m=function(o,n){return o===n}}if(this.length!==i.length){return false}for(j=l=0,k=this.length;0<=k?l<k:l>k;j=0<=k?++l:--l){if(!m(this[j],i[j])){return false}}return true};Array.prototype.fill=function(m,n,j){var k,l;if(n==null){n=0}if(j==null){j=this.length-1}n=this._index(n);j=this._index(j);[].splice.apply(this,[n,j-n+1].concat(l=(function(){var o,i;i=[];for(k=o=n;n<=j?o<=j:o>=j;k=n<=j?++o:--o){i.push(m)}return i})())),l;return this};Array.prototype.first=function(){return this[0]};Array.prototype.last=function(){var i;i=this._index(-1);return this[i]};Array.prototype.uniq=function(m){var l,k,j,i;if(m==null){m=function(o,n){return o===n}}l=[];for(j=0,i=this.length;j<i;j++){k=this[j];if(!l.isInclude(k,m)){l.push(k)}}return this.replace(l)};Array.prototype.index=function(l,m){var i,k,j;if(m==null){m=function(o,n){return o===n}}for(i=k=0,j=this.length;0<=j?k<j:k>j;i=0<=j?++k:--k){if(m(this[i],l)){return i}}return void 0};Array.prototype.indexes=function(){var k,l,j,i;i=[];for(l=0,j=arguments.length;l<j;l++){k=arguments[l];i.push(this.at(k))}return i};Array.prototype.rindex=function(l,m){var i,k,j;if(m==null){m=function(o,n){return o===n}}for(i=k=j=this.length;j<=0?k<0:k>0;i=j<=0?++k:--k){if(m(this[i],l)){return i}}return void 0};Array.prototype.flatten=function(){return this.replace(this.reduce(function(j,i){return j.concat(i instanceof Array?i.flatten():i)},[]))};Array.prototype.transpose=function(){var n,m,l,k,j,q,p,o;k=this.isEmpty()?0:this.length;n=this.first() instanceof Array?this.first().length:0;if(!k||!n){return this}l=(function(){var r,i;i=[];for(m=r=0;0<=n?r<n:r>n;m=0<=n?++r:--r){i.push([])}return i})();for(j=p=0;0<=k?p<k:p>k;j=0<=k?++p:--p){for(q=o=0;0<=n?o<n:o>n;q=0<=n?++o:--o){l[q][j]=this[j][q]}}return this.replace(l)};Array.prototype.compact=function(){return this.deleteIf(function(i){return i===void 0})};Array.prototype.isInclude=function(l,m){var j,k,i;if(m==null){m=function(o,n){return o===n}}for(k=0,i=this.length;k<i;k++){j=this[k];if(m(j,l)){return true}}return false};Array.prototype.size=function(){return this.length};Array.prototype.swap=function(j,i){var k;j=this._index(j);i=this._index(i);k=this[j];this[j]=this[i];this[i]=k;return this};Array.prototype.shuffle=function(){var j,l,k;for(j=l=0,k=this.length;0<=k?l<k:l>k;j=0<=k?++l:--l){this.swap(j,Math.floor(Math.random()*this.length))}return this};Array.prototype.choice=function(){return this[Math.floor(Math.random()*this.length)]};Array.prototype.count=function(m,n){var i,j,l,k;if(n==null){n=function(p,o){return p===o}}j=0;for(i=l=0,k=this.length;0<=k?l<k:l>k;i=0<=k?++l:--l){if(n(this[i],m)){++j}}return j};Array.prototype.replace=function(i){var k,l,j;this.clear();for(l=0,j=i.length;l<j;l++){k=i[l];this.push(k)}return this};Array.prototype.nitems=function(){return this.clone().compact().size()};Array.prototype.insert=function(){var l,m,k,j,o,n;l=Array.prototype.slice.call(arguments,0,arguments.length);if(l.size()<=1){return this}k=this._index(l[0]);j=l.slice(1,this.length);for(m=o=0,n=j.length;0<=n?o<n:o>n;m=0<=n?++o:--o){this.splice(k+m,0,j[m])}return this};Array.prototype.clear=function(){var i;i=[];while(!this.isEmpty()){i.push(this.deleteAt(0))}return i};Array.prototype.max=function(j){var i;if(j==null){j=function(l,k){if(l===k){return 0}if(l<k){return -1}else{return 1}}}i=this.first();this.reduce(function(l,k){if(j(i,k)<0){return i=k}});return i};Array.prototype.min=function(j){var i;if(j==null){j=function(l,k){if(l===k){return 0}if(l<k){return -1}else{return 1}}}i=this.first();this.reduce(function(l,k){if(j(i,k)>=0){return i=k}});return i};g=(function(){function i(j,l,n,m,k){if(l==null){l=false}if(n==null){n=0}if(m==null){m=false}if(k==null){k=void 0}this.set(j);this._time=n;this._active=m;this._complete=k;this._repeat=l}i.prototype.set=function(j){if(j==null){j=0}this._max=j;return this};i.prototype.play=function(){this._active=true;return this};i.prototype.stop=function(){this._active=false;this._time=0;return this};i.prototype.pause=function(){this._active=false;return this};i.prototype.reset=function(){this._time=0;return this};i.prototype.tick=function(){if(this._time<this._max&&this._active){++this._time;if(this._time===this._max){if(this._complete!=null){this._complete()}if(this._repeat){this._time=0}}}return this};i.prototype.now=function(){return this._time};i.prototype.max=function(){return this._max};i.prototype.setNow=function(j){this._time=j;return this};i.prototype.setComplete=function(j){this._complete=j;return this};i.prototype.setRepeat=function(j){this._repeat=j;return this};i.prototype.isActive=function(){return this._active};i.prototype.isOver=function(){return this._time>=this._max};return i})();b=(function(){function i(){}i._sounds=[];i.root="";i.load=function(){var n,j,m,l,k;j=Array.prototype.slice.call(arguments);k=[];for(m=0,l=j.length;m<l;m++){n=j[m];k.push(i._loadSound(n))}return k};i.play=function(j){if(!(i._sounds[j]!=null)){i._loadSound(j)}i.stop(j);return i._sounds[j].play()};i.pause=function(j){if(j!=null){return i._sounds[j].pause()}};i.stop=function(j){if(j!=null){return i._sounds[j].stop()}};i._loadSound=function(k,j){if(!(i._sounds[k]!=null)){if(j!=null){return i._sounds[k]=Sound.load(""+i.root+k,j)}else{return i._sounds[k]=Sound.load(""+i.root+k)}}};return i})();enchant();d=(function(j){f(i,j);i.prototype.config={WIDTH:640,HEIGHT:480,FPS:30,FONT:"Helvetica",IMAGE_PATH:"/image/",IMAGES:["kawaz.png"],SOUND_PATH:"/sound/",SOUNDS:[],INITIAL_LEVEL:1,LAST_LEVEL:7,LEVEL_TIME:30};function i(){var o,l,n,k,m;i.__super__.constructor.call(this,this.config.WIDTH,this.config.HEIGHT);this.fps=this.config.FPS;this.keybind(90,"a");this.keybind(88,"b");i.game=this;i.config=this.config;m=this.config.IMAGES;for(n=0,k=m.length;n<k;n++){o=m[n];this.preload(""+this.config.IMAGE_PATH+o)}l=new e();this.onload=function(){l.setup();return this.pushScene(l)};this.start()}return i})(Game);window.onload=function(){return new d()};h=(function(i){f(j,i);function j(l,m,k,n){if(k==null){k=0}if(n==null){n=0}j.__super__.constructor.call(this,l,m);this.removeEventListener("enterframe");this.x=k;this.y=n;this.v=new a();this.speed=7}j.prototype.update=function(k){this.x+=this.v.x;return this.y+=this.v.y};j.prototype.setImage=function(k){console.log(""+d.config.IMAGE_PATH+k);return this.image=d.game.assets[""+d.config.IMAGE_PATH+k]};j.prototype.position=function(){return new a(this.x,this.y)};j.prototype.center=function(){return new a(this.x+this.width/2,this.y+this.height/2)};return j})(Sprite);e=(function(j){f(i,j);function i(){return i.__super__.constructor.apply(this,arguments)}i.prototype.setup=function(){this.kawaz=new h(253,81);this.kawaz.setImage("kawaz.png");this.kawaz.x=193.5;this.kawaz.y=220;console.log(this.kawaz);this.kawaz.opacity=0;this.addChild(this.kawaz);this.addEventListener("enterframe",this.update);this.timer=new g(180);this.timer.setComplete(function(){d.game.replaceScene(new TitleScene());return this});return this.timer.play()};i.prototype.update=function(){if(d.game.input.a){d.game.replaceScene(new TitleScene());this}this.timer.tick();if(this.timer.now()<60){return this.kawaz.opacity+=1/60}else{if(this.timer.now()>120){return this.kawaz.opacity-=1/60}}};return i})(Scene)}).call(this);